= Refactoring Opportunities for cui-jwt-token-handling

This document outlines potential refactoring opportunities for the cui-jwt-token-handling project. Each task is actionable and includes a rationale.

== Task Completion Process

After implementing any task in this document, follow these steps:

1. Clean-Up Code: Use "./mvnw -Prewrite-prepare-release rewrite:run" -> verify with "./mvnw clean install" -> Fix if necessary and commit
2. Clean-Up Javadoc: "./mvnw clean install -Pjavadoc" -> Fix all errors and warnings, verify until they are all corrected
3. Verify the documentation is updated correctly
4. Commit the changes with a git commit. Use the task name (e.g., "C1. Document Bouncy Castle Usage") as the commit message
5. Check the checkbox for the completed task

== Task List

Each task is numbered with a prefix indicating its category (e.g., "implement task C4" for code-specific task 4).

== Code Structure and Design

== Performance Improvements

== Security Enhancements

=== S1. Implement Key Rotation Alerts
[ ] *Priority:* High

*Description:* Add monitoring and alerting for key rotation events to ensure timely response to key changes. Implement this by introducing an new LogRecord on WARN that transports this information. Add a corresponding security event as well. Ensure that the writing of that Log-Statement and security event is explicitly tested in the corresponding unit-test. Because of its nature this is only relevant for the HttpJwksLoader.

*Rationale:* Proactive monitoring of key rotation helps prevent authentication failures during key transitions.

=== S2. Add Support for Additional Cryptographic Algorithms
[ ] *Priority:* Medium

*Description:* Extend AlgorithmPreferences to support additional modern cryptographic algorithms as they become standardized.

*Rationale:* Staying current with cryptographic standards is essential for long-term security.

== Testing Improvements

== Dependency Management

== Documentation Improvements

=== DOC1. Create Comprehensive JavaDoc

== Future Enhancements

=== F1. Support for JWT Token Issuance
[ ] *Priority:* Low

*Description:* Consider adding support for JWT token issuance in addition to validation.

*Rationale:* This would make the library more comprehensive and useful for a wider range of use cases.

=== F2. Add Support for OAuth 2.1 and OpenID Connect 2.0
[ ] *Priority:* Low

*Description:* Plan for supporting upcoming OAuth 2.1 and OpenID Connect 2.0 standards.

*Rationale:* Staying current with evolving standards ensures long-term relevance of the library.

=== F3. Implement Pluggable Validation Rules
[ ] *Priority:* Medium

*Description:* Create a pluggable system for custom validation rules to allow users to extend the validation pipeline.

*Rationale:* This would increase flexibility and allow for domain-specific validation requirements.

=== F4. Implement CUI-JWT-1.4: Token Decryption
[ ] *Priority:* Low

*Description:* Implement support for decryption of encrypted JWT tokens (JWE) as defined in RFC 7516. This includes:
1. Parser modifications to recognize and handle JWE tokens
2. Data model extensions to support JWE structure
3. Key management extensions for encryption keys
4. Security considerations for JWE tokens

*Rationale:* Supporting encrypted tokens would enhance the security of sensitive information in tokens and provide a more comprehensive JWT handling solution.
