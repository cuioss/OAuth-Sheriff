= Token Generator Simplification TODO List
:toc: left
:toclevels: 3
:sectnums:
:sectnumlevels: 4
:icons: font
:source-highlighter: highlightjs

== Overview

This document contains actionable tasks for simplifying and unifying the token generator approach in the project, based on the recommendations in the link:generator.adoc[Token Generator Documentation].

== Important Guidelines

* *Do not deprecate anything or provide transitionary comments.* Just plain delete code that is no longer needed.
* The documentation for token generators is available in link:generator.adoc[Token Generator Documentation].
* After completing each task:
** Verify using `./mvnw -Prewrite rewrite:run verify javadoc:javadoc`
** Fix all warnings (except "Systemmodulpfad nicht zusammen mit -source 17 festgelegt")
** Mark the task as completed in this document by changing `[ ]` to `[x]`
** Make a git commit for the completed task

== Short-term Improvements

=== Increase usage of TokenGenerators factory

[x] Replace direct instantiations of token generators with calls to the `TokenGenerators` factory class.

Steps:

1. Identify all places where token generators are directly instantiated
2. Replace with equivalent calls to `TokenGenerators` factory methods
3. Verify that all tests still pass
4. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

=== Standardize generator initialization

[x] Create and implement consistent patterns for initializing token generators.

Steps:

1. Analyze current generator initialization patterns
2. Define standard initialization patterns for different test scenarios
3. Update tests to use the standardized initialization patterns
4. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

=== Document generator usage patterns

[x] Create clear documentation on when to use each type of generator and how to configure them.

Steps:

1. Create a new section in the generator documentation or a separate document
2. Document each generator type with usage examples
3. Include recommendations for which generator to use in different scenarios

== Medium-term Refactorings

=== Unify TokenContent and JWT string generation

[ ] Create a bridge between `TokenContentImpl` and JWT string generators.

Steps:

1. Analyze the current separation between TokenContent and JWT string generation
2. Design a bridge component that allows easy conversion between the two approaches
3. Implement the bridge component
4. Update tests to use the bridge where appropriate
5. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

=== Create a unified token builder API

[ ] Develop a fluent builder API for token creation.

Steps:

1. Design a fluent builder API that can create both TokenContent objects and JWT strings
2. Implement the builder API
3. Update tests to use the new builder API
4. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

=== Consolidate duplicate generators

[ ] Identify and consolidate generators with overlapping functionality.

Steps:

1. Analyze all token generators to identify duplication
2. Design consolidated generators that cover the functionality of multiple existing generators
3. Implement the consolidated generators
4. Update tests to use the consolidated generators
5. Remove the now-redundant generators
6. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

== Long-term Architecture

=== Token generation framework

[ ] Develop a comprehensive token generation framework.

Steps:

1. Design a framework architecture that supports all token types and validation scenarios
2. Implement the core framework components
3. Migrate existing generators to use the framework
4. Update tests to use the framework
5. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

=== Test data factory

[ ] Create a test data factory for generating tokens with realistic data.

Steps:

1. Design a test data factory that can generate tokens with realistic data
2. Implement the test data factory
3. Update tests to use the test data factory
4. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality

=== Declarative token specification

[ ] Implement declarative token specification capabilities.

Steps:

1. Design a declarative approach for specifying tokens (e.g., via annotations or configuration files)
2. Implement the declarative specification mechanism
3. Update tests to use the declarative approach where appropriate
4. Run `./mvnw -Prewrite rewrite:run verify javadoc:javadoc` to ensure code quality
