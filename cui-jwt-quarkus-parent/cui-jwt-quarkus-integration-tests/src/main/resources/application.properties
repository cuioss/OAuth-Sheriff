# JWT Integration Test Application Configuration

# Application metadata
quarkus.application.name=cui-jwt-integration-tests
quarkus.application.version=1.0.0-SNAPSHOT

# HTTPS Configuration for native image integration tests (using PEM certificates)
quarkus.http.ssl.certificate.files=/app/certificates/localhost.crt
quarkus.http.ssl.certificate.key-files=/app/certificates/localhost.key
quarkus.http.port=8080
quarkus.http.ssl-port=8443
quarkus.http.insecure-requests=redirect

# JWT Configuration for Integration Testing
# Default issuer for static key testing (disabled for Docker integration tests)
cui.jwt.issuers.default.issuer-identifier=https://test-auth.example.com
cui.jwt.issuers.default.enabled=false
cui.jwt.issuers.default.jwks.file-path=classpath:test-jwks.json

# Keycloak issuer for well-known discovery testing
cui.jwt.issuers.keycloak.enabled=true
# JWKS URLs use internal Docker hostname for container-to-container communication
cui.jwt.issuers.keycloak.jwks.http.well-known-url=http://keycloak:8080/realms/benchmark/.well-known/openid-configuration
cui.jwt.issuers.keycloak.expected-client-id=benchmark-client

# Integration issuer for direct JWKS URL testing
cui.jwt.issuers.integration.enabled=true
# IMPORTANT: issuer-identifier must match what would be returned by well-known discovery
# For consistency with the keycloak issuer above, we use the internal Docker hostname
# This ensures proper issuer validation when JWKS is loaded
cui.jwt.issuers.integration.issuer-identifier=http://keycloak:8080/realms/integration
# JWKS URLs use internal Docker hostname for container-to-container communication
cui.jwt.issuers.integration.jwks.http.url=http://keycloak:8080/realms/integration/protocol/openid-connect/certs
cui.jwt.issuers.integration.expected-client-id=integration-client

# Health Checks
cui.jwt.health.enabled=true
cui.jwt.health.jwks.cache-seconds=30
cui.jwt.health.jwks.timeout-seconds=5

# Metrics - No explicit configuration needed, metrics are automatically enabled

# Logging
quarkus.log.level=INFO
quarkus.log.category."de.cuioss.jwt".level=DEBUG

# Development settings
quarkus.live-reload.instrumentation=false

# REST Configuration
quarkus.rest.path=/
