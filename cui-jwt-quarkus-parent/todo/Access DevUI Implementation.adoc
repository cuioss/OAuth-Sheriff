= Task 10. Access DevUI Implementation
:toc:
:toclevels: 3
:toc-title: Table of Contents
:sectnums:

include::task-completion-process.adoc[leveloffset=+1]

== Overview
[ ] *Priority:* Medium

*Description:* Activate and access the existing DevUI implementation for the CUI JWT Quarkus extension:

. Activate DevUI components:
+
--
* Uncomment DevUI dependencies in POM files
* Enable DevUI build steps in CuiJwtProcessor
* Activate JSON-RPC service for runtime data
--
. Access DevUI interface:
+
--
* Start Quarkus application in development mode
* Navigate to DevUI at `/q/dev-ui/`
* Access CUI JWT card and pages
--
. Verify DevUI functionality:
+
--
* Test JWT validation status monitoring
* Verify configuration viewer
* Test JWKS endpoint monitoring
* Validate token debugging tools
--

*Rationale:* The DevUI implementation has been prepared with comprehensive components for JWT validation monitoring, configuration viewing, and debugging tools. Activating these components will provide developers with powerful tools for understanding and troubleshooting JWT validation during development.

== Implementation Steps

. *Activate DevUI Dependencies*:
+
--
* [ ] Uncomment DevUI SPI dependency in `cui-jwt-quarkus-deployment/pom.xml`
* [ ] Uncomment DevUI runtime dependency in `cui-jwt-quarkus/pom.xml`  
* [ ] Verify dependencies are properly resolved
--

. *Enable DevUI Build Steps*:
+
--
* [ ] Uncomment DevUI imports in `CuiJwtProcessor.java`
* [ ] Uncomment `createJwtDevUICard()` method
* [ ] Uncomment `createJwtDevUIJsonRPCService()` method
* [ ] Verify build steps are properly registered
--

. *Activate JSON-RPC Service*:
+
--
* [ ] Rename `CuiJwtDevUIJsonRPCService.java.template` to `.java`
* [ ] Rename test file `CuiJwtDevUIIntegrationTest.java.template` to `.java`
* [ ] Rename test file `CuiJwtDevUIJsonRPCServiceTest.java.template` to `.java`
* [ ] Verify service is properly injected and functional
--

. *Test DevUI Access*:
+
--
* [ ] Build project with DevUI dependencies: `mvn clean compile`
* [ ] Start test application in development mode: `mvn quarkus:dev`
* [ ] Navigate to DevUI at `http://localhost:8080/q/dev-ui/`
* [ ] Locate "CUI JWT" card in DevUI interface
--

. *Verify DevUI Pages*:
+
--
* [ ] Access "JWT Validation Status" page
* [ ] Access "JWKS Endpoints" page  
* [ ] Access "Token Debugger" page
* [ ] Access "Configuration" page
* [ ] Verify all pages load without errors
--

. *Test DevUI Functionality*:
+
--
* [ ] Verify validation status indicators work correctly
* [ ] Test configuration display shows current settings
* [ ] Validate real-time data updates
* [ ] Test error handling for invalid states
--

== Technical Requirements

=== DevUI Components Available

. *JWT Validation Status*:
+
--
* Real-time validation status monitoring
* Security event statistics display
* Validator availability indicators
* Status message explanations
--

. *JWKS Endpoint Monitoring*:
+
--
* Endpoint connectivity status
* Key refresh statistics
* Configuration validation
* Manual refresh capabilities
--

. *Token Debugger*:
+
--
* Token validation testing interface
* Claims structure visualization
* Error diagnosis and explanation
* Test token generation tools
--

. *Configuration Viewer*:
+
--
* Complete configuration display
* Health status indicators
* Configuration issue detection
* Nested configuration support
--

=== Activation Changes Required

. *In `cui-jwt-quarkus-deployment/pom.xml`*:
+
--
[source,xml]
----
<!-- Uncomment this dependency -->
<dependency>
    <groupId>io.quarkus</groupId>
    <artifactId>quarkus-devui-spi</artifactId>
    <version>${quarkus.version}</version>
</dependency>
----
--

. *In `cui-jwt-quarkus/pom.xml`*:
+
--
[source,xml]
----
<!-- Uncomment this dependency -->
<dependency>
    <groupId>io.quarkus</groupId>
    <artifactId>quarkus-devui</artifactId>
    <version>${quarkus.version}</version>
    <scope>runtime</scope>
    <optional>true</optional>
</dependency>
----
--

. *In `CuiJwtProcessor.java`*:
+
--
[source,java]
----
// Uncomment these imports
import io.quarkus.deployment.IsDevelopment;
import io.quarkus.devui.spi.JsonRPCProvidersBuildItem;
import io.quarkus.devui.spi.page.CardPageBuildItem;
import io.quarkus.devui.spi.page.Page;

// Uncomment these build steps
@BuildStep(onlyIf = IsDevelopment.class)
CardPageBuildItem createJwtDevUICard() {
    // Implementation already prepared
}

@BuildStep(onlyIf = IsDevelopment.class)
JsonRPCProvidersBuildItem createJwtDevUIJsonRPCService() {
    // Implementation already prepared
}
----
--

=== DevUI URLs and Navigation

Once activated, access DevUI components at:

. *Main DevUI*: `http://localhost:8080/q/dev-ui/`
. *CUI JWT Card*: Look for "CUI JWT" card with shield icon
. *Available Pages*:
+
--
* **JWT Validation Status**: Real-time monitoring and statistics
* **JWKS Endpoints**: Endpoint status and key management
* **Token Debugger**: Token testing and validation tools  
* **Configuration**: Complete configuration overview
--

=== Web Components

The following web components are already implemented:

. `qwc-jwt-validation-status.js` - Validation status monitoring
. `qwc-jwks-endpoints.js` - JWKS endpoint management
. `qwc-jwt-debugger.js` - Token debugging interface
. `qwc-jwt-config.js` - Configuration viewer

=== JSON-RPC Methods

The backend service provides these methods:

. `getValidationStatus()` - Current validation status
. `getConfiguration()` - Complete configuration data
. `getHealthInfo()` - Health check information
. `getJwksStatus()` - JWKS endpoint status
. `validateToken(token)` - Token validation testing

== Usage Instructions

=== Accessing the DevUI

. *Start Development Mode*:
+
--
[source,bash]
----
cd cui-jwt-quarkus-parent
mvn quarkus:dev
----
--

. *Navigate to DevUI*:
+
--
* Open browser to `http://localhost:8080/q/dev-ui/`
* Look for "CUI JWT" card in the extensions list
* Click on the card to access JWT-specific pages
--

. *Explore Available Pages*:
+
--
* **Validation Status**: Monitor real-time JWT validation
* **Configuration**: View current extension configuration
* **JWKS Endpoints**: Monitor key endpoint status
* **Token Debugger**: Test and debug JWT tokens
--

=== Using the Token Debugger

. *Token Validation Testing*:
+
--
* Paste JWT tokens into the validation interface
* View detailed validation results
* See claims structure and validation errors
* Test with different token scenarios
--

. *Configuration Testing*:
+
--
* Verify issuer configurations
* Test JWKS endpoint connectivity
* Validate key material and algorithms
* Debug common configuration issues
--

=== Monitoring Validation Status

. *Real-time Monitoring*:
+
--
* View current validation status indicators
* Monitor security event counters
* Track validation performance metrics
* Observe configuration health status
--

. *Configuration Debugging*:
+
--
* Inspect complete configuration hierarchy
* Identify missing or invalid settings
* Verify issuer and JWKS configurations
* Debug connectivity and key loading issues
--

== Task Completion Checklist

*1. Activate Dependencies:*
+
--
* [ ] DevUI SPI dependency uncommented in deployment module
* [ ] DevUI runtime dependency uncommented in runtime module
* [ ] Build completes successfully with DevUI dependencies
--

*2. Enable Build Steps:*
+
--
* [ ] DevUI imports uncommented in CuiJwtProcessor
* [ ] createJwtDevUICard() method uncommented and functional
* [ ] createJwtDevUIJsonRPCService() method uncommented and functional
* [ ] Build steps register correctly during compilation
--

*3. Activate Services:*
+
--
* [ ] CuiJwtDevUIJsonRPCService.java.template renamed to .java
* [ ] Test files renamed from .template to .java
* [ ] JSON-RPC service registers and functions correctly
* [ ] All DevUI methods respond with valid data
--

*4. Verify Access:*
+
--
* [ ] Application starts in development mode successfully
* [ ] DevUI accessible at `/q/dev-ui/`
* [ ] CUI JWT card appears in extensions list
* [ ] All four pages (Status, JWKS, Debugger, Config) load correctly
--

*5. Test Functionality:*
+
--
* [ ] Validation status shows correct information
* [ ] Configuration viewer displays current settings
* [ ] JWKS monitoring shows endpoint status
* [ ] Token debugger validates tokens correctly
* [ ] Real-time updates work properly
--

*6. Update Status:*
+
--
* [ ] Mark the task as completed with [x]
* [ ] Document any issues encountered during activation
* [ ] Note DevUI performance and usability
* [ ] Record developer feedback on DevUI tools
--

*7. Full Verification:*
+
--
* [ ] DevUI integration test: `mvn test -Dtest=CuiJwtDevUIIntegrationTest`
** [ ] DevUI components register correctly
** [ ] JSON-RPC service functions properly
** [ ] Web components load without errors
* [ ] Manual DevUI testing: Start application with `mvn quarkus:dev`
** [ ] Access all DevUI pages successfully
** [ ] Verify real-time data updates
** [ ] Test token validation and debugging features
--

== Success Criteria

1. **DevUI Accessibility**: All DevUI components are accessible through the Quarkus Dev UI interface
2. **Real-time Monitoring**: JWT validation status updates in real-time with accurate information
3. **Configuration Visibility**: Complete configuration is visible and properly formatted in DevUI
4. **Token Debugging**: Token validation and debugging tools function correctly
5. **JWKS Monitoring**: JWKS endpoint status and key management work properly
6. **Developer Experience**: DevUI provides valuable insights for JWT development and debugging
7. **Error Handling**: DevUI handles errors gracefully and provides helpful error messages
8. **Performance**: DevUI components load quickly and don't impact application performance

This task will activate the comprehensive DevUI implementation that has already been prepared, providing developers with powerful tools for JWT validation monitoring, configuration debugging, and token testing during development.
