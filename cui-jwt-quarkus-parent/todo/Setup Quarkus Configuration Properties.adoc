= Task 1. Setup Quarkus Configuration Properties
:toc:
:toclevels: 3
:toc-title: Table of Contents
:sectnums:

include::task-completion-process.adoc[leveloffset=+1]

== Overview
[x] *Priority:* High

*Description:* Implement Quarkus configuration properties for JWT validation, including:

. Create a configuration class using `@ConfigMapping` annotation (preferred for Quarkus 3.x+)
. Define properties for:
+
--
* JWT issuer URLs/endpoints
* Public key locations
* JWT claim validations (audience, expiration tolerance, etc.)
* JWKS endpoint configuration (cache TTL, refresh interval)
* Keystore configuration options
* Algorithm preferences and security settings
* Custom claim mapping configuration
--
. The configuration must support the multi-issuer approach of the library. Each configuration above must be configurable for each issuer.
. All properties should be prefixed with `cui.jwt`
. Implement property validation using Bean Validation annotations
. Provide sensible default values
. Add configuration documentation

*Rationale:* Proper configuration is essential for the JWT validation module to work effectively in a Quarkus application. Using Quarkus' configuration system allows for type-safe configuration with runtime validation and makes it easier for users to understand available options.

== Implementation Steps

* [x] Create JwtValidationConfig interface with @ConfigMapping annotation
* [x] Define nested configuration interfaces for IssuerConfig, ParserConfig, and HttpJwksLoaderConfig
* [x] Define and document all configuration properties with proper JavaDoc
* [x] Implement validation logic for configuration values using Bean Validation annotations
* [x] Create unit tests for configuration parsing and validation
* [x] Document all configuration options in README with examples

== Task Completion Checklist

*1. Verify Implementation:*
+
--
* [x] Verify all implementation steps are completed
* [x] Check code against Quarkus and CUI standards
* [x] Ensure proper error handling and edge cases are covered
* [x] Verify compatibility with both JVM and native mode
--

*2. Write Tests:*
+
--
* [x] Write unit tests for all components
* [x] Create integration tests for real-world scenarios
* [x] Test with different configuration options
* [x] Verify error cases and edge conditions
--

*3. Verify Documentation:*
+
--
* [x] Update all references in README.adoc
* [x] Update relevant documentation in doc/ directory
* [x] Check for outdated file paths or references
* [x] Ensure consistent naming across all documentation
* [x] Add examples for common use cases
--

*4. Update Status:*
+
--
* [x] Mark the task as completed with [x]
* [x] Add any notes about implementation challenges or decisions if needed
--

*5. Make a Full Build:*
+
--
* [ ] Run the the module build: `.cd cui-jwt-quarkus-parent && mvn clean install` (from project-root)
** [ ] Verify all tests pass
** [ ] Check for any warnings that should be addressed
** [ ] Verify code coverage meets standards
* [ ] Run the full build command: `./mvnw -Ppre-commit clean verify` (from project-root)
** [ ] Verify all tests pass
** [ ] Check for any warnings that should be addressed
--

*6. Commit Changes:*
+
--
* [x] Stage all modified files
* [x] Use the task name as the commit message
* [x] Include any additional notes about implementation decisions in the commit description
--

== Implementation Notes

The configuration has been implemented using the Quarkus `@ConfigMapping` annotation, which provides type-safe configuration with validation. The configuration supports the multi-issuer approach of the library, allowing different validation settings for different token issuers.

Key features of the implementation:

1. **Multi-issuer support**: Each issuer can have its own configuration for public keys, JWKS endpoints, and validation rules.
2. **Sensible defaults**: Default values are provided for all configuration options to make it easy to get started.
3. **Validation**: Bean Validation annotations are used to ensure configuration values are valid.
4. **Documentation**: Comprehensive documentation is provided in the quarkus-config-doc.adoc file.

The configuration is structured as follows:

* `JwtValidationConfig`: The main configuration interface with the `@ConfigMapping` annotation.
* `IssuerConfig`: Configuration for a specific JWT issuer.
* `ParserConfig`: Configuration for JWT parser settings.
* `HttpJwksLoaderConfig`: Configuration for HTTP JWKS (JSON Web Key Set) endpoint.

All configuration properties are prefixed with `cui.jwt` as required.
