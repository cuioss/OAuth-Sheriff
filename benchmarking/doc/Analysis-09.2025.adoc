= JWT Validation REST API Performance Analysis - September 2025
:source-highlighter: highlight.js

Performance and resource utilization comparison of JWT validation REST API using different load generators: JMH and WRK.

== Benchmark Configuration

Both benchmarks test the identical JWT validation REST API endpoints:
- **Health endpoint**: `/q/health/live`
- **JWT validation endpoint**: `/jwt/validate`
- **Target service**: Quarkus JWT validation service at https://localhost:10443

**Difference**: Only the load generation tool differs (JMH vs WRK), but both make the same HTTP requests.

== Performance Results

|===
|Metric |JMH Load Generator |WRK Load Generator |Analysis

|**Health Check Throughput**
|9,600 ops/s
|14,300 ops/s
|WRK achieved +49% higher throughput

|**JWT Validation Throughput**
|6,900 ops/s
|8,600 ops/s
|WRK achieved +25% higher throughput

|**JWT Validation Latency**
|~0.245ms (calculated)
|5.8ms (P50)
|WRK shows higher latency due to HTTP overhead

|**Total Validations Processed**
|7,772,364
|8,483,151
|WRK processed +9% more validations
|===

== CPU Resource Analysis

**Quarkus Service CPU Usage (from /metrics endpoint):**

|===
|Load Generator |Process CPU Usage |System CPU Usage |Efficiency (ops per CPU%)

|**JMH**
|11.9%
|11.9%
|580 ops/s per 1% CPU

|**WRK**
|5.0%
|5.4%
|1,720 ops/s per 1% CPU

|**Efficiency Ratio**
|Baseline
|2.4x more efficient
|WRK is 2.97x more CPU efficient
|===

== Resource Utilization Comparison

**CPU Efficiency Analysis:**
- **WRK Load Generator**: Achieved 8,600 ops/s using only 5.0% CPU
- **JMH Load Generator**: Achieved 6,900 ops/s using 11.9% CPU
- **CPU Efficiency**: WRK is ~3x more CPU-efficient per operation

**Memory Usage (both tests):**
- Heap Memory: ~22MB (eden: 12.6MB, old gen: 9.4MB)
- Stable memory footprint across both load generators
- Native image shows minimal memory overhead

== Load Generator Impact

**JMH Framework Overhead:**
- Higher CPU utilization for same API calls
- More resource-intensive load generation
- Better for detailed JVM-level profiling

**WRK Tool Efficiency:**
- Lower CPU overhead for equivalent load
- More efficient HTTP request generation
- Better for pure throughput testing

== Key Findings

1. **Same API, Different Efficiency**: Both test identical REST endpoints but WRK generates load more efficiently
2. **WRK Superior Throughput**: 25-49% higher throughput with 58% less CPU usage
3. **CPU Efficiency**: WRK achieves 3x better CPU efficiency (ops per CPU percentage)
4. **Memory Footprint**: Identical ~22MB regardless of load generator
5. **Service Performance**: Quarkus service processes 8.5M+ validations efficiently

== Conclusions

The comparison reveals that **load generator choice significantly impacts resource efficiency**:

- **WRK** is superior for throughput testing with minimal resource overhead
- **JMH** provides better profiling capabilities but at higher resource cost
- **Quarkus service** performs consistently well with both load generators
- **CPU efficiency** varies dramatically (3x difference) based on load generation approach

The JWT validation service demonstrates excellent performance with both load generators, processing millions of validations with low CPU usage and stable memory consumption.